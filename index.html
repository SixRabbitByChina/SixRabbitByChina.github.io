<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://sixrabbitbychina.github.io.git/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://SixRabbitByChina.github.io.git"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-linux/笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/linux/%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-07-23T06:08:35.801Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/linux/%E7%AC%94%E8%AE%B0/">linux/笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-Linux指令"><a href="#1-Linux指令" class="headerlink" title="1.Linux指令"></a>1.Linux指令</h1><p><strong>在使用linux的shell指令前，请仔细阅读一下事项（血与泪的教训）</strong></p>
<ol>
<li><strong>shell指令区分大小写</strong></li>
<li><strong>部分dos指令在kaliLinux通用，但是不要去使用</strong></li>
<li><strong>加粗部分仔细阅读</strong></li>
<li><strong>重要的事情看三遍</strong></li>
</ol>
<h2 id="1-whoami"><a href="#1-whoami" class="headerlink" title="1.whoami"></a>1.whoami</h2><blockquote>
<p>whoami(我是谁？)</p>
</blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ whoami</span><br></pre></td></tr></table></figure>

<p>可以通过这个指令获取登录的用户</p>
<p><img src="image/whoami.png" alt="whoami"></p>
<h2 id="2-who、w、users和tty指令"><a href="#2-who、w、users和tty指令" class="headerlink" title="2.who、w、users和tty指令"></a>2.who、w、users和tty指令</h2><blockquote>
<p>who(谁？)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> who</span></span><br></pre></td></tr></table></figure>

<p><img src="image/w.png" alt="w"></p>
<p>用来查看现在有哪些用户在这个系统上工作。</p>
<p><strong>分析</strong></p>
<ul>
<li>21:08:43表示现在的时间</li>
<li>up 4 min表示系统启动了4分钟</li>
<li>1 user表示现在登陆了几个用户</li>
<li>load average为平均负载值：分别为在过去的一分钟内平均提交0.44个任务，十分钟内平均提交0.64个任务，十五分钟内平均提交0.33个任务</li>
</ul>
<p><strong>用户</strong></p>
<ul>
<li>USER 为用户名</li>
<li>tty表示改用户的终端</li>
<li>@LOGIN@为登录时间</li>
<li>IDLE为该用户的空闲时间</li>
<li>JCPU表示该用户使用的cpu总时长</li>
<li>PCPU表示当前该用户使用的程序使用了多长的cpu</li>
<li>WHAT 表示该用户正在运行的程序</li>
</ul>
<blockquote>
<p>users(用户？)、tty(终端、打印机)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> users</span></span><br></pre></td></tr></table></figure>

<p>显示使用过这个终端的用户。</p>
<p><img src="image/users.png" alt="users"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tty</span></span><br></pre></td></tr></table></figure>

<p>显示终端的路径</p>
<p><img src="image/tty.png" alt="tty"></p>
<h2 id="3-uname"><a href="#3-uname" class="headerlink" title="3.uname"></a>3.uname</h2><blockquote>
<p>uname(UNIX name)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> uanme -[额外指令]</span></span><br></pre></td></tr></table></figure>

<p>显示与用户相关的信息</p>
<p><strong>额外指令</strong></p>
<ul>
<li>-r(release)该系统的版本号</li>
<li>-s(system)该系统名</li>
<li>-m(machine)显示该系统的硬件名</li>
<li>-a(all)显示所用信息</li>
</ul>
<p>![uname -a](image/uname -a.png)</p>
<h2 id="4-date、cal和clear命令"><a href="#4-date、cal和clear命令" class="headerlink" title="4.date、cal和clear命令"></a>4.date、cal和clear命令</h2><blockquote>
<p>date(时间)和cal(calender日历)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> date</span></span><br></pre></td></tr></table></figure>

<p>显示现在的时间</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cal [月份] [年份]</span></span><br></pre></td></tr></table></figure>

<p>以日历形式显示时间</p>
<blockquote>
<p>clear(打扫、清屏)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> clear</span></span><br></pre></td></tr></table></figure>

<p>清理屏幕</p>
<h2 id="5-su和passwd"><a href="#5-su和passwd" class="headerlink" title="5.su和passwd"></a>5.su和passwd</h2><blockquote>
<p>exit(退出||登出)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">exit</span></span></span><br></pre></td></tr></table></figure>

<p>登出，推出现在用户</p>
<blockquote>
<p>useradd(添加新用户)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> useradd [用户名]</span></span><br></pre></td></tr></table></figure>

<p>添加新用户，密码为空</p>
<blockquote>
<p>passwd(密码)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> passwd [用户名]</span></span><br></pre></td></tr></table></figure>

<p>可以通过该选项修改密码。root可以直接修改其他用户的密码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> passwd -s [用户名]</span></span><br></pre></td></tr></table></figure>

<p>查看用户的密码状态</p>
<blockquote>
<p>su(switch user 更换用户)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> su -[用户名]</span></span><br></pre></td></tr></table></figure>

<p>更换用户</p>
<h2 id="6-whatis和help"><a href="#6-whatis和help" class="headerlink" title="6.whatis和help"></a>6.whatis和help</h2><blockquote>
<p>whatis(这是什么？)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">whatis [指令]</span></span><br></pre></td></tr></table></figure>

<p>基于当前指令显示出帮助页面</p>
<blockquote>
<p>help(帮助)</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"><span class="built_in">help</span></span></span><br></pre></td></tr></table></figure>

<p>通常用作为后缀，显示出该指令的帮助页面</p>
<p>额外内容info和man pages</p>
<h1 id="2-目录文件结构和指令"><a href="#2-目录文件结构和指令" class="headerlink" title="2.目录文件结构和指令"></a>2.目录文件结构和指令</h1><blockquote>
<p>目录结构</p>
</blockquote>
<p><img src="image/%E7%9B%AE%E5%BD%95.png" alt="目录"></p>
<blockquote>
<p>重要文件结构</p>
</blockquote>
<p>linux采用的FHS结构管理文件目录</p>
<ul>
<li>bin目录<ul>
<li>一般用来存放可执行文件</li>
</ul>
</li>
<li>sbin(system bin)目录<ul>
<li>用来存放系统可执行文件</li>
</ul>
</li>
<li>home目录<ul>
<li>每次登录都会默认进入该目录</li>
</ul>
</li>
<li>media或者是mnt目录（有兴趣的问我）</li>
<li>etc目录<ul>
<li>用来存放主要配置文件</li>
<li>存放ASCII码的正文文件，只有root可以修改，普通用户可以访问</li>
</ul>
</li>
<li>tmp目录（temp 临时文件）</li>
<li>boot目录<ul>
<li>用来存放核心文件</li>
</ul>
</li>
<li>dev目录<ul>
<li>驱动文件存放地点</li>
</ul>
</li>
<li>usr目录<ul>
<li>应用目录存放的地点类似于windows的Program Files</li>
</ul>
</li>
<li>var目录<ul>
<li>存放日志或者mail文件</li>
</ul>
</li>
<li>srv目录<ul>
<li>存放服务的目录</li>
</ul>
</li>
<li>proc目录<ul>
<li>用来存放虚拟内存的目录</li>
</ul>
</li>
<li>libs、usr/lib、usr/local/lib<ul>
<li>存放必要运行的库文件或者说是库函数</li>
</ul>
</li>
</ul>
<h2 id="1-pwd和cd命令"><a href="#1-pwd和cd命令" class="headerlink" title="1.pwd和cd命令"></a>1.pwd和cd命令</h2><blockquote>
<p>pwd(print working directory)打印工作目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"><span class="built_in">pwd</span></span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>cd(change directories)切换目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"><span class="built_in">cd</span> /[目录名]</span></span><br></pre></td></tr></table></figure>

<h2 id="2-ls命令"><a href="#2-ls命令" class="headerlink" title="2.ls命令"></a>2.ls命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls</span></span><br></pre></td></tr></table></figure>

<p>显示当前目录下的所有文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls ..</span></span><br></pre></td></tr></table></figure>

<p>显示上一级目录下的所有文件</p>
<h3 id="1-F"><a href="#1-F" class="headerlink" title="1.-F"></a>1.-F</h3><p><strong>注意：”..”表示上一级目录，”.”表示当前目录</strong></p>
<p>显示的文件内型：</p>
<ul>
<li>“\“:表示只显示目录</li>
<li>“*”:表示可执行文件</li>
<li>“@”:表示符号链接（感兴趣的询问鄙人）</li>
<li>什么也没有表示纯文本和</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls -F</span></span><br></pre></td></tr></table></figure>

<h3 id="2-a和–all"><a href="#2-a和–all" class="headerlink" title="2.-a和–all"></a>2.-a和–all</h3><p>有些文件是隐藏的，为了查看可以使用-a附加指令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls -a</span></span><br></pre></td></tr></table></figure>

<p>该指令与ls –all等价，可以用来显示多个文件夹中的文件</p>
<h3 id="3-l"><a href="#3-l" class="headerlink" title="3.-l"></a>3.-l</h3><p>以列表形式显示文件目录，可以和其他附加指令共同使用</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls -l -a</span></span><br></pre></td></tr></table></figure>

<p>与ls -la等价</p>
<h3 id="4-h"><a href="#4-h" class="headerlink" title="4.-h"></a>4.-h</h3><p>显示文件的大小</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls -l -h</span></span><br></pre></td></tr></table></figure>

<p>与ls -lh等价。一般和-l混用</p>
<h3 id="5-lR"><a href="#5-lR" class="headerlink" title="5.-lR"></a>5.-lR</h3><p>显示文件目录和子目录的文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls -lR</span></span><br></pre></td></tr></table></figure>



<h3 id="6-模糊查询显示"><a href="#6-模糊查询显示" class="headerlink" title="6.*模糊查询显示"></a>6.*模糊查询显示</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls d*</span></span><br></pre></td></tr></table></figure>

<p>显示以d开头的文件，以此类推</p>
<p><strong>注意：文件夹区分大小写</strong></p>
<h2 id="3-cp指令（copy）"><a href="#3-cp指令（copy）" class="headerlink" title="3.cp指令（copy）"></a>3.cp指令（copy）</h2><blockquote>
<p>copy(copy)复制</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">cp [附加指令&lt;选项&gt;] 数据源&lt;<span class="built_in">source</span>(s)&gt; target</span></span><br></pre></td></tr></table></figure>

<ul>
<li>附加指令&lt;option(s)&gt;<ul>
<li>-i(interactive交互的):防止不小心覆盖已存在的文件或者目录，并给出提醒</li>
<li>-r(recursive递归的):复制目录中的所有文件</li>
<li>-p(preserve维持的:)保留一些特定的属性（特性）,如时间戳等</li>
<li>-f(forc强制的:)直接覆盖原有目录</li>
<li>-a(all全部指令模式)含有以上所有特性</li>
</ul>
</li>
</ul>
<p>数据源：指的是需要赋值的文件</p>
<p>target：复制到那的地址</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls <span class="built_in">test</span> /root</span></span><br></pre></td></tr></table></figure>

<p>将本目录下的test复制到root文件下</p>
<p><strong>注意：linux和unix复制文件只有在出错的时候才会抛出错误，所以谨慎使用</strong></p>
<h3 id="1-使用-进行复制"><a href="#1-使用-进行复制" class="headerlink" title="1.使用*进行复制"></a>1.使用*进行复制</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">ls t* /root</span></span><br></pre></td></tr></table></figure>

<p>将t开头的文件全部复制到root文件夹下，以次类推</p>
<h2 id="4-mv命令及修改文件夹和目录名"><a href="#4-mv命令及修改文件夹和目录名" class="headerlink" title="4.mv命令及修改文件夹和目录名"></a>4.mv命令及修改文件夹和目录名</h2><blockquote>
<p>mv(move移动)</p>
</blockquote>
<p>用来<strong>移动</strong>文件，也可以重新命名文件名</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mv <span class="built_in">test</span> /root</span></span><br></pre></td></tr></table></figure>

<p><img src="image/mv.png" alt="mv"></p>
<p><strong>注意:移动文件夹注意一下是否有”/“，否则或被当作修改文件名处理</strong></p>
<p><strong>建议使用绝对路径</strong></p>
<h3 id="1-使用mv搬用多个文件"><a href="#1-使用mv搬用多个文件" class="headerlink" title="1.使用mv搬用多个文件"></a>1.使用mv搬用多个文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">mv test01 test02 /root</span></span><br></pre></td></tr></table></figure>

<p><strong>注意:运输多个文件必须使用绝对路径、支持”*”</strong></p>
<p><img src="image/mv2.png" alt="mv2"></p>
<h2 id="5-mkdir创建文件夹"><a href="#5-mkdir创建文件夹" class="headerlink" title="5.mkdir创建文件夹"></a>5.mkdir创建文件夹</h2><p><strong>阅读本段时：请仔细阅读一下内容</strong></p>
<ol>
<li>此段有SixRabbit记录</li>
<li>查阅此段时需要用到翻译</li>
<li>你最好阅读一下下面的话</li>
<li>The author is very cool</li>
<li>作者はとてもかっこいいです</li>
<li>This is a colored egg</li>
<li>谢谢【配合】</li>
</ol>
<blockquote>
<p>mkdir(make directory)创建目录</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">mkdir [目录名]</span></span><br></pre></td></tr></table></figure>

<p>或者可以是这样的格式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">mkdir /root/<span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>

<h2 id="6-touch创建文件"><a href="#6-touch创建文件" class="headerlink" title="6.touch创建文件"></a>6.touch创建文件</h2><blockquote>
<p>touch创建文件夹</p>
</blockquote>
<p>该指令可以创建多个文件或单个文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">touch 文件名</span></span><br></pre></td></tr></table></figure>

<p>实例如下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">touch test.txt</span></span><br></pre></td></tr></table></figure>

<p>创建一个为test.txt的文件</p>
<blockquote>
<p>创建多个文件</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">touch 1.text 2.text …… n.text</span></span><br></pre></td></tr></table></figure>

<p><strong>注意(waring): 请不要随意创建各种乱七八糟的文件</strong></p>
<blockquote>
<p>命名规则</p>
</blockquote>
<p><strong><em>\</em>1.文件名名称严格区分字符大小写；**</strong></p>
<p><strong><em>\</em>2.文件名可以除了使用除斜线（/）以外的任意字符**</strong>；</p>
<p>（但不介意使用特殊字符，尤其比如说前面第一个文件名叫a*b，将来查找看到是不是也感觉头晕啊，所以不建议使用特殊字符，也包括空格；不得不使用多个单词命名的可以使用下划线来连接其多个单词</p>
<p><strong><em>\</em>3.文件名不能，不能超过255个字符；**</strong></p>
<p><strong><em>\</em>(**</strong>不过我们说过，其实谁也不可能超过255个字符)</p>
<p><strong><em>\</em>4.以点号开头的文件为隐藏文件，**</strong></p>
<p>(表示我们是常见的，或者正常情况下我们是看不见的)</p>
<h2 id="7-rm指令"><a href="#7-rm指令" class="headerlink" title="7.rm指令"></a>7.rm指令</h2><blockquote>
<p>rm(remove)删除</p>
</blockquote>
<p><strong>注意：一旦删除则视为永久删除</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">rm [option(s)选项|额外指令] files|directories</span></span><br></pre></td></tr></table></figure>

<p>额外指令:</p>
<ul>
<li>-i(interactive交互的):防止不小心删除文件，并给出提醒</li>
<li>-r(recursive递归的):复制目录中所有内容</li>
<li>-f(forc强制的:)直接删除</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">rm <span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>

<p><strong>支持”*”</strong></p>
<p><strong>注意:使用该指令删除目录是，需要-r</strong></p>
<h2 id="8-rmdir"><a href="#8-rmdir" class="headerlink" title="8.rmdir"></a>8.rmdir</h2><blockquote>
<p>rmdir(remove directories)删除文件夹</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">rmdir <span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>

<p><strong>注意：该指令只可以删除空文件夹，需要删除需要用到rm -r</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">rm -r <span class="built_in">test</span></span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/linux/%E7%AC%94%E8%AE%B0/" data-id="ckcyfaqv20002ekv23qds1qnt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/注解/@WebServlet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/%E6%B3%A8%E8%A7%A3/@WebServlet/" class="article-date">
  <time datetime="2020-07-23T06:07:08.413Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/%E6%B3%A8%E8%A7%A3/@WebServlet/">javaWeb/注解/@WebServlet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>@WebServlet注解</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>([name=<span class="string">"类名"</span>],[urlPatterns = &#123;<span class="string">"Context"</span>,<span class="string">"URL"</span>,<span class="string">"URL"</span>&#125;],</span><br><span class="line">	[initParams = &#123;</span><br><span class="line">        <span class="meta">@WebInitParam</span>(name=<span class="string">"Create"</span>,value = <span class="string">"SixRabbit"</span>),</span><br><span class="line">        <span class="meta">@WebInitParam</span>(name=<span class="string">"Create"</span>,value = <span class="string">"SixRabbit"</span>),</span><br><span class="line">        <span class="meta">@WebInitParam</span>(name=<span class="string">"Create"</span>,value = <span class="string">"SixRabbit"</span>)……</span><br><span class="line">    &#125;]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>urlPatterns用来告诉容器怎么调用该Servlet</p>
<p>initParams配置初始化参数</p>
<table>
    <tr>
        <td>ServletContext.getInitParameter(name)</td>
        <td>根据name获取value的值</td>
    </tr>
    <tr>
        <td>ServletContext.getInitParameterNames()</td>
        <td>获取所有参数名称列表</td>
    </tr>
</table>




      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/%E6%B3%A8%E8%A7%A3/@WebServlet/" data-id="ckcyfaqvw0007ekv244rqd57z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/Servlet/表达式语言" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/Servlet/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/" class="article-date">
  <time datetime="2020-07-23T06:07:08.400Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/Servlet/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/">javaWeb/Servlet/表达式语言</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/Servlet/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/" data-id="ckcyfaqvd0003ekv21bdif66o" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/Servlet/笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/Servlet/%E7%AC%94%E8%AE%B0/" class="article-date">
  <time datetime="2020-07-23T06:07:08.378Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/Servlet/%E7%AC%94%E8%AE%B0/">javaWeb/Servlet/笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="1-Servlets"><a href="#1-Servlets" class="headerlink" title="1.Servlets"></a>1.Servlets</h1><p>java web第一步 学习Servlet</p>
<p>​    <u><em>站在巨人的肩膀上看世界，在大牛的路上学IT</em></u></p>
<h2 id="1-Servlet-API"><a href="#1-Servlet-API" class="headerlink" title="1.Servlet API"></a>1.Servlet API</h2><table>
    <tr>
        <td>javax.servlet</td>
        <td>其中包含定义Servlet和Servlet容器之间的类和接口</td>
    </tr>
    <tr>
        <td>javax.servlet.http</td>
        <td>包含了定义了HTTP Servlet和Servlet容器的类和接口</td>
    </tr>
    <tr>
        <td>javax.servlet.annotation</td>
        <td>其中包含了标注Servlet、Filter、Listener的标注，它还为被标注元件定义元数据</td>
    </tr>
    <tr>
        <td>javax.servlet.descriptor</td>
        <td>其中包含提供程序化登录Web应用程序的配置类型</td>
    </tr>
</table>
**Servlet技术的核心是servlet（这句话是废话）**，所有的Servlet类都**必须直接或者间接**的实现一个接口

<blockquote>
<p>载入内存</p>
</blockquote>
<p>Servlet容器将Servlet类载入内存，并在Servlet实例上调用具体方法，<strong>每种Servlet类型只能存在一个实例（这句也是废话）</strong></p>
<blockquote>
<p>细节</p>
</blockquote>
<p>对于每一个应用程序，Servlet容器还会创建一个ServletContext实例，这个对象封装了应用程序的环境配置，每个应用程序只有一个，同时也会生成一个带有Servlet配置的ServletConfig</p>
<h2 id="2-Servlet接口"><a href="#2-Servlet接口" class="headerlink" title="2.Servlet接口"></a>2.Servlet接口</h2><table>
    <tr>
        <td>void init(ServletConfig config) throws ServletException</td>
        <td>当Servlet<strong>第一次被请求时</strong>Servlet容器会调用该方法，后续不在调用。使用时Servlet容器会传入一个ServletConfig。</td>
    </tr>
    <tr>
        <td>void service(ServletRequest request,ServletResponse response) throws ServletException,java.io.IOException</td>
        <td>每次请求时都会调用该方法</td>
    </tr>
    <tr>
        <td>void destroy()</td>
        <td>销毁该Servlet时，容器会调用这个方法，当卸载或者关闭容器时会调用这个方法</td>
    </tr>
    <tr>
        <td>java.lang.String getServletInfo()</td>
        <td>返回这个servlet的描述</td>
    </tr>
    <tr>
        <td>ServletConfig getServletConfig()</td>
        <td>返回容器传入的init()的ServletConfig。必须将init方法的ServletConfig付给一个类级变量</td>
    </tr>
</table>

<blockquote>
<p>注意</p>
</blockquote>
<p>Servlet实例会被一个应用程序所有的用户共享，不建议使用类级变量，除非是只读或者是java.util.concurrent.atomic包成员。</p>
<h2 id="3-解剖Servlet应用程序"><a href="#3-解剖Servlet应用程序" class="headerlink" title="3.解剖Servlet应用程序"></a>3.解剖Servlet应用程序</h2><p>按照惯例，Servlet类的名称应该由Servlet作为后缀。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.EOFException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"MyServlet"</span>,urlPatterns = &#123;<span class="string">"/my"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span>  ServletConfig servletConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servletConfig=servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"MyServlet"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String servletName = servletConfig.getServletName();</span><br><span class="line">        servletResponse.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = servletResponse.getWriter();</span><br><span class="line">        writer.print(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello from"</span> + servletName + <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Web Servlet标注</p>
</blockquote>
<p>name属性可选，urlPatterns也是可选，但是十分重要，一般都是有的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8080&#x2F;Demo04_war&#x2F;my</span><br></pre></td></tr></table></figure>

<p>IDEA这是访问该servlet的URL</p>
<h2 id="4-ServletRequest"><a href="#4-ServletRequest" class="headerlink" title="4.ServletRequest"></a>4.ServletRequest</h2><p>对于每一个HTTP请求，Servlet容器都会创建一个ServletRequest实例，封装了请求的信息并传给Service方法</p>
<table>
    <tr>
        <td>public int getContentlength()</td>
        <td>返回请求主体字数，否则返回-1</td>
    </tr>
    <tr>
        <td>public java.lang.String getContentType()</td>
        <td>返回请求主体的MIME类型，否则返回null</td>
    </tr>
    <tr>
        <td>public java.lang.String getParameter(java.lang.String name)</td>
        <td>返回指定参数的值</td>
    </tr>
    <tr>
        <td>public java.lang.String getProtocol()</td>
        <td>返回这个HTTP请求的协议名称和版本</td>
    </tr>
</table>

<blockquote>
<p>方法使用</p>
</blockquote>
<p>getParameter通常用于返回HTML表单域的值</p>
<p>getParameter也可用于获取查询字符串的值，例如一下的URL调用的Servlet:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;domain&#x2F;context&#x2F;servletName?id&#x3D;123</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String id = request.getParameter(<span class="string">"id"</span>);</span><br></pre></td></tr></table></figure>

<p>回去id的值，如果无法获取，返回null</p>
<h2 id="5-ServletResponse"><a href="#5-ServletResponse" class="headerlink" title="5.ServletResponse"></a>5.ServletResponse</h2><p>javax.servlet.ServletResponse接口表示一个Servlet响应，调用Servlet的service方法时，容器会先创建一个ServletResponse传给service。</p>
<p>ServletResponse中的getWriter方法，他返回了一个可以向客户端发送文本的java.io.PrintWriter。PrintWriter默认使用ISO-8895-1编码</p>
<p><strong>注意：getOutStream也可以用来浏览器发送传输。这个方法是用来发送二进制数据的</strong></p>
<blockquote>
<p>注意事项</p>
</blockquote>
<p>发送HTML标签时，都应该先调用setContentType方法，设置响应的内容类型，”text/html”告诉浏览器传入的是HTML类型。如果没有则会被渲染成浏览器默认类型。</p>
<h2 id="6-ServletConfig"><a href="#6-ServletConfig" class="headerlink" title="6.ServletConfig"></a>6.ServletConfig</h2><p>当容器初始化Servlet时，容器会给Servlet的init方法传入一个ServletConfig。封装可以通过@WebServlet或者部署描述符传给Servlet的配置信息，这样传入的每一条信息就叫一个初始参数，每个初始参数有key和value两个元件</p>
<blockquote>
<p>方法</p>
</blockquote>
<p>获取初始参数的值，要在init方法的ServletConfig中调用getInitParameter方法，方法签名如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.<span class="function">String <span class="title">getInitParameter</span><span class="params">(java.lang.String name)</span></span></span><br></pre></td></tr></table></figure>

<p>getInitParameterNames方法则是返回所有参数名称的一个Enumeration：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.Enumeration&lt;java.lang.String&gt; getInitParameterNames()</span><br></pre></td></tr></table></figure>

<p>eg：获取contactName的参数值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String contactName = servletConfig.getInitParameter(<span class="string">"contactName"</span>)</span><br></pre></td></tr></table></figure>

<p>Demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebInitParam;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"ServletConfigDemoServlet"</span>,</span><br><span class="line">        urlPatterns = &#123;<span class="string">"/servletConfigDemo"</span>&#125;,</span><br><span class="line">        initParams = &#123;</span><br><span class="line">            <span class="meta">@WebInitParam</span>(name = <span class="string">"admin"</span>,value = <span class="string">"Harry Taciak"</span>), <span class="meta">@WebInitParam</span>(name = <span class="string">"email"</span>,value = <span class="string">"admin@example.com"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServletConfigDemoServlet</span> <span class="keyword">implements</span> <span class="title">Servlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> ServletConfig servletConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.servletConfig=servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> servletConfig;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ServletConfig demo"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ServletConfig servletConfig = getServletConfig();</span><br><span class="line">        String admin = servletConfig.getInitParameter(<span class="string">"admin"</span>);</span><br><span class="line">        String email = servletConfig.getInitParameter(<span class="string">"email"</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = servletResponse.getWriter();</span><br><span class="line">        writer.print(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;"</span> + <span class="string">"Admin:"</span> + admin + <span class="string">"&lt;br/&gt;Email:"</span> + email + <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在@WebServlet的initParams属性中，给Servlet传入了两个初始参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"ServletConfigDemoServlet"</span>,</span><br><span class="line">        urlPatterns = &#123;<span class="string">"/servletConfigDemo"</span>&#125;,</span><br><span class="line">        initParams = &#123;</span><br><span class="line">            <span class="meta">@WebInitParam</span>(name = <span class="string">"admin"</span>,value = <span class="string">"Harry Taciak"</span>), <span class="meta">@WebInitParam</span>(name = <span class="string">"email"</span>,value = <span class="string">"admin@example.com"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>利用一下URL访问</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;localhost:8080&#x2F;Demo04_war&#x2F;servletConfigDemo</span><br></pre></td></tr></table></figure>

<p>除以上方法外，还可以使用部署描述符，因为部署描述符是一个文本文件，所以不需要重新编译Servlet类。</p>
<h2 id="7-ServletContext"><a href="#7-ServletContext" class="headerlink" title="7.ServletContext"></a>7.ServletContext</h2><p>ServletContext表示Servlet应用程序，每个web应用程序只有一个上下文。将一个应用程序同时部署到多个容器的分布式环境中，每台JVM上的web应用都会有一个ServletContext对象。</p>
<p>通过在ServletConfig中调用getServletContext方法，可以获取ServletContext。</p>
<p>ServletContext可以共享从应用程序中所有资料处访问到的信息，并且可以动态注册web对象。前者将对象保存在ServletContext中的一个内部Map中。保存在ServletContext中的对象称作属性</p>
<blockquote>
<p>负责处理属性的方法</p>
</blockquote>
<table>
    <tr>
        <td>java.lang.Object getAttribute(java.lang.String name)</td>
    </tr>
    <tr>
        <td>java.util.Enumeration<java.lang.String> getAttributeNames()</td>
    </tr>
    <tr>
        <td>void setAttribute(java.lang.String name,java.lang.Object object)</td>
    </tr>
    <tr>
        <td>void removeAttribute(java.lang.String name)</td>
    </tr>
</table>

<h2 id="8-GenericServlet抽象类"><a href="#8-GenericServlet抽象类" class="headerlink" title="8.GenericServlet抽象类"></a>8.GenericServlet抽象类</h2><p>相比Servlet接口，GenericServlet抽象类实现了Servlet和ServletConfig接口，并且减少了许多不必要的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebInitParam;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"GenericServletDemoServlet"</span>,</span><br><span class="line">        urlPatterns = &#123;<span class="string">"/generic"</span>&#125;,</span><br><span class="line">        initParams = &#123;</span><br><span class="line">                <span class="meta">@WebInitParam</span>(name = <span class="string">"admin"</span>,value = <span class="string">"Harry Taciak"</span>), <span class="meta">@WebInitParam</span>(name = <span class="string">"email"</span>,value = <span class="string">"admin@example.com"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericServletDemoServlet</span> <span class="keyword">extends</span>  <span class="title">GenericServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">62500890L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ServletConfig servletConfig = getServletConfig();</span><br><span class="line">        String admin = servletConfig.getInitParameter(<span class="string">"admin"</span>);</span><br><span class="line">        String email = servletConfig.getInitParameter(<span class="string">"email"</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = servletResponse.getWriter();</span><br><span class="line">        writer.print(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;"</span> + <span class="string">"Admin:"</span> + admin + <span class="string">"&lt;br/&gt;Email:"</span> + email + <span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-HttpServlet抽象类"><a href="#9-HttpServlet抽象类" class="headerlink" title="9.HttpServlet抽象类"></a>9.HttpServlet抽象类</h2><p>相比之前的Servlet和GenericService抽象类显得过于繁琐，所以就有了HttpServlet。</p>
<blockquote>
<p>详解</p>
</blockquote>
<p>它继承了javax.servlet.GenericServlet类，使用它需要用到HttpServletRequest和HttpServletResponse对象。</p>
<p>它覆盖掉了GenericServlet的service()，并且通过以下签名在添加一个service方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request,HttpServletResponse respone)</span> <span class="keyword">throws</span> ServletException,java.io.IOException</span></span><br></pre></td></tr></table></figure>

<p>Servlet容器调用javax.servlet.Servlet中的原始的Service方法，HttpServlet编写如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest req,ServletResponse res)</span><span class="keyword">throws</span> ServletException,IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    HttpServletRequest request;</span><br><span class="line">    HttpServletResponse response;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        request = (HttpServletRequest)req;</span><br><span class="line">        response = (HttpServletResponse)res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>(ClassCastException e)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ServletException(<span class="string">"non-HTTP request to response"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    service(request,response);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>原始的service方法将Servlet容器传入的两个对象分别转换成HttpServletRequest和HttpServletResponse，并且调用新的service方法。</p>
<p>然后HttpServlet中的service()会校验用来发送请求的HTTP方法，并且调用一下方法之一：doGet、doPost、doHead、doPut、doTrace、doOptions和doDelete。因此不需要去覆盖service()发明合法，只需要覆盖doGet和doPost即可。</p>
<blockquote>
<p>总结</p>
</blockquote>
<ul>
<li>不需要覆盖service()方法，只需要覆盖doGet和doPost方法等。</li>
<li>使用的是HttpServletRequest和HttpServletResponse。</li>
</ul>
<blockquote>
<h3 id="HttpServletRequest新增方法"><a href="#HttpServletRequest新增方法" class="headerlink" title="HttpServletRequest新增方法"></a>HttpServletRequest新增方法</h3></blockquote>
<table>
    <tr>
        <td>java.lang.String getContextPath()</td>
        <td>返回表示请求上下文的请求URL部分</td>
    </tr>
    <tr>
        <td>Cookie[] getCookies()</td>
        <td>返回一个Cookie对象数组</td>
    </tr>
    <tr>
        <td>java.lang.String getHeader(java.lang.String name)</td>
        <td>返回指定的HTTP标题值</td>
    </tr>
    <tr>
        <td>java.lang.String getMethod()</td>
        <td>返回生成这个请求的HTTP方法名称</td>
    </tr>
    <tr>
        <td>java.lang.String getQueryString()</td>
        <td>返回URL中的查询字符串</td>
    </tr>
    <tr>
        <td>HttpSession getSession()</td>
        <td>返回与这个请求相关的会话，如果没有就创建一个</td>
    </tr>
    <tr>
        <td>HttpSession getSession(boolean create)</td>
        <td>返回与这个请求相关的会话，如果没有就根据create参数判断，是否创建一个</td>
    </tr>
</table>



<blockquote>
<h3 id="HttpServletResponse新增方法"><a href="#HttpServletResponse新增方法" class="headerlink" title="HttpServletResponse新增方法"></a>HttpServletResponse新增方法</h3></blockquote>
<table>
    <tr>
        <td>void addCookie(Cookie cookie)</td>
        <td>给这个响应对象添加一个cookie</td>
    </tr>
    <tr>
        <td>void addHeader(java.lang.String name,java.lang.String value)</td>
        <td>给响应对象添加一个header</td>
    </tr>
    <tr>
        <td>void sendRedirect(java.lang.String location)</td>
        <td>返送一条响应码，跳转到指定位置</td>
    </tr>
</table>

<h2 id="10-处理HTML表单"><a href="#10-处理HTML表单" class="headerlink" title="10.处理HTML表单"></a>10.处理HTML表单</h2><p>相对与画窗体，画网页也同样简单，但是如何获取到不同控件的值。</p>
<blockquote>
<p>思绪</p>
</blockquote>
<p>HTML的select元素也向header返送了一个字符串。如果select元素中没有任何选项被选中，那么就会发出所显示的这个选项值。</p>
<p>包含多个值的select元素发出一个字符串数组，必须通过SelectRequest.getParameterValues进行处理。</p>
<p>复选框比较奇特。核查过的复选框会发送字符串”on”到服务器。未经检查的复选框则不会向服务器发送任何信息（废话），ServletRequest.getParameter(fieldName)返回NULL</p>
<p>单选框将选中的值发送到服务器，没选择的同上。</p>
<p>如果一个表单包含多个出入同名的元素，那么所有值都会被提交，并且必须利用ServletRequest.getParameterValue()获取他们。</p>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"FormServlet"</span>,urlPatterns = &#123;<span class="string">"/form"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">54L</span>;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> String TITLE = <span class="string">"Order Form"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;title&gt;"</span> + TITLE + <span class="string">"&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;&lt;h1&gt;"</span> + TITLE + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;form method='post'&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;table&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Name:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;input name='name'/&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Address&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;textarea name='address' cols='40' rows='5'&gt;&lt;/textarea&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Country:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;select name='counrey'&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;option&gt;United States&lt;/option&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;option&gt;Canada&lt;/option&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/select&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Delivery Method:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;input type = 'radio' name = 'deliveryMethod' value='First Class'/&gt;First Class"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;input type = 'radio' name = 'deliveryMethod' value='Second Class'/&gt;Second Class&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Shipping Instructions:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;textarea name='instructions' cols='40' rows='5'&gt;&lt;/textarea&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&amp;nbsp&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;textarea name='instructions' cols='40' rows='5'&gt;&lt;/textarea&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Please send me the latest product catalog:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;input type='checkbox' name='catalogRequest'/&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&amp;nbsp&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;input type='reset'/&gt;&lt;input type='submit'/&gt;&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/table&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/form&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;title&gt;"</span> + TITLE + <span class="string">"&lt;/title&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;&lt;h1&gt;"</span> + TITLE + <span class="string">"&lt;/h1&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;table&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Name:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span> + req.getParameter(<span class="string">"name"</span>) + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Address:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span> + req.getParameter(<span class="string">"address"</span>) + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Country&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span> + req.getParameter(<span class="string">"country"</span>) + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Shipping Instructions:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span>);</span><br><span class="line">        String[] instructions = req.getParameterValues(<span class="string">"country"</span>);</span><br><span class="line">        <span class="keyword">if</span>(instructions != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (String instruction : instructions)</span><br><span class="line">            &#123;</span><br><span class="line">                writer.println(instruction + <span class="string">"&lt;br&gt;/"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Delivery Method:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span> + req.getParameter(<span class="string">"deliveryMethod"</span>) + <span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;Catalog Request:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;"</span>);</span><br><span class="line">        <span class="keyword">if</span>(req.getParameter(<span class="string">"catalogRequest"</span>) == <span class="keyword">null</span>)</span><br><span class="line">            writer.println(<span class="string">"NO"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            writer.println(<span class="string">"Yes"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/table&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;div style='border:1px solid #ddd;margin-top:40px;font-size:90%'&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"Debug Info&lt;br/&gt;"</span>);</span><br><span class="line">        Enumeration&lt;String&gt; parameterNames = req.getParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(parameterNames.hasMoreElements())</span><br><span class="line">        &#123;</span><br><span class="line">            String paramNames = parameterNames.nextElement();</span><br><span class="line">            writer.println(paramNames + <span class="string">": "</span>);</span><br><span class="line">            String[] paramValues = req.getParameterValues(<span class="string">"paramName"</span>);</span><br><span class="line">            <span class="keyword">for</span>(String paramValue : paramValues)</span><br><span class="line">            &#123;</span><br><span class="line">                writer.println(paramValue + <span class="string">"&lt;/br&gt;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;/div&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-部署描述符"><a href="#11-部署描述符" class="headerlink" title="11.部署描述符"></a>11.部署描述符</h2><p>Servlet有两种部署方式，一种是WebServlet标记部署，还有一种，就是web.xml部署。</p>
<p>web.xml一般位于WEB-INF目录下</p>
<blockquote>
<p>Demo</p>
</blockquote>
<p>两个没有标记的Servlet项目。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">8946L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Simple Servlet&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WelcomeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">27126L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Welcome&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>web.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">web-app</span> <span class="meta-keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span></span><br><span class="line"><span class="meta"> <span class="meta-string">"http://java.sun.com/dtd/web-app_2_3.dtd"</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--SimpleServlet部署--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SimpleServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bdqn.servlet.SimpleServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>10<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>SimpleServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/simple<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--Welcome部署--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>WelcomeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.bdqn.servlet.WelcomeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>10<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>WelcomeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/welcome<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>以后详解</strong></p>
<h1 id="2-会话管理"><a href="#2-会话管理" class="headerlink" title="2.会话管理"></a>2.会话管理</h1><p>HTTP协议的无状态性，导致一些web服务器无法确认HTTP请求是否为第一次访问，所以他们创造（create）了一个叫做会话的东西。</p>
<blockquote>
<p>摘自JSP笔记</p>
</blockquote>
<h3 id="什么是会话"><a href="#什么是会话" class="headerlink" title="什么是会话?"></a>什么是会话?</h3><p>一个会话就是指在一段时间中，一个用户与web服务器的一连串相关的交互过程（其中包含请&amp;响应过程）。</p>
<p>当用户向服务器发起一次请求时，服务器就会为该用户创建<strong>一个唯一会话</strong>，直到用户访问结束，如果一个用户发起请求，服务器就会判断是否已经创建与该用户的为已请求</p>
<p>​        服务器会根据sessionid这个唯一标识来判断是否和该用户创建会话，如果请求中包含一个sessionid，说明已经建立了一个会话，服务器会根据这个sessionid将相应的会话对象读取出来</p>
<p>如果没有，就创建一个新的会话。</p>
<p>sessionid是采用cookie来实现的</p>
<h2 id="1-URL重写"><a href="#1-URL重写" class="headerlink" title="1.URL重写"></a>1.URL重写</h2><p>URL重写是一种会话跟踪技术，他将一个或多个token添加到URL的查询字符串中，每个token通常以key/value(键值对)的形式存在。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://…………?key-1=value-1&amp;key-2=value-2...key-n=value-n</span><br></pre></td></tr></table></figure>

<p><em>注意：*</em>url和token用？分割，token用&amp;分开***</p>
<blockquote>
<p>规范</p>
<p>注意：括号中的都是原书屁话</p>
</blockquote>
<ul>
<li>URL在某些网站上最大长度为2000字符串</li>
<li>诺需要将值传递下一个资源中，需要将值插入到链接中。（<strong>换句话说：静态页面很难传值</strong>）</li>
<li>URL重写需要在服务端上完成，所有链接都必须带值。（当一个页面存在多条链接时，处理过程是个不小的困难）</li>
<li>某些字符，例如空格、与(&amp;)和问好等都必须使用base64编码（这句话都是屁话）</li>
<li>所有信息都可见，某些情况中不合适。</li>
</ul>
<p>因为存在以上信息限制，所以URL重写仅在轻量级数据传递，且对信息本身不敏感。</p>
<blockquote>
<p>Demo解析</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"Top10Servlet"</span>,urlPatterns = &#123;<span class="string">"/top10"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Top10Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">987654321L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; londonAttractions;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; parisAttractions;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        londonAttractions = <span class="keyword">new</span> ArrayList&lt;String&gt;(<span class="number">10</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Tian Jin"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Bei Jin"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Shang Hai"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Wu Han"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Chang Sha"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Chong Qing"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Hong Kong"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Shan Xi"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Cheng Du"</span>);</span><br><span class="line">        londonAttractions.add(<span class="string">"Nan Jing"</span>);</span><br><span class="line"></span><br><span class="line">        parisAttractions = <span class="keyword">new</span> ArrayList&lt;String&gt;(<span class="number">10</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"天津"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"北京"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"上海"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"武汉"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"长沙"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"重庆"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"香港"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"陕西"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"成都"</span>);</span><br><span class="line">        parisAttractions.add(<span class="string">"南京"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String city = req.getParameter(<span class="string">"city"</span>);</span><br><span class="line">        <span class="keyword">if</span>(city != <span class="keyword">null</span> &amp;&amp; (city.equals(<span class="string">"london"</span>)|| city.equals(<span class="string">"paris"</span>)))</span><br><span class="line">        &#123;</span><br><span class="line">            showAttractions(req,resp,city);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            showMainPage(req,resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showMainPage</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException,IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Top 10 Tourist Attractions&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;Please select a city:&lt;br/&gt;&lt;a href='?city=london'&gt;London&lt;/a&gt;&lt;/br&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;a href='?city=paris'&gt;Paris&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">showAttractions</span><span class="params">(HttpServletRequest request,HttpServletResponse response,String city)</span> <span class="keyword">throws</span> ServletException,IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> page= <span class="number">1</span>;</span><br><span class="line">        String pageParameter = request.getParameter(<span class="string">"page"</span>);</span><br><span class="line">        <span class="keyword">if</span>(pageParameter != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                page = Integer.parseInt(pageParameter);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (NumberFormatException e)</span><br><span class="line">            &#123;</span><br><span class="line">                 e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(page &gt; <span class="number">2</span>)</span><br><span class="line">                page = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;String&gt; attractions = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(city.equals(<span class="string">"london"</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            attractions = londonAttractions;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(city.equals(<span class="string">"paris"</span>));</span><br><span class="line">        &#123;</span><br><span class="line">            attractions = parisAttractions;</span><br><span class="line">        &#125;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Top 10 Tourist Attractions&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;&lt;a href='top10'&gt;Select City&lt;/a&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;hr/&gt;Page "</span> + page + <span class="string">" &lt;hr/&gt;"</span>);</span><br><span class="line">        <span class="keyword">int</span> start = page * <span class="number">5</span> - <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; start + <span class="number">5</span> ; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(attractions.get(i) + <span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;hr style='color:blue'/&gt;&lt;a href='?city="</span> + city + <span class="string">"&amp;page=1'&gt;Page 1"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;hr style='color:blue'/&gt;&lt;a href='?city="</span> + city + <span class="string">"&amp;page=2'&gt;Page 2"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>init()剖析</p>
</blockquote>
<p>init由于时servlet创建时第一个调用，初始化了两个景点列表</p>
<blockquote>
<p>doGet()剖析</p>
</blockquote>
<p>每次请求都会调用该方法，所以会检查URL中是否存在参数city,由此决定调用那个方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">String city = req.getParameter(<span class="string">"city"</span>);</span><br><span class="line"><span class="keyword">if</span>(city != <span class="keyword">null</span> &amp;&amp; (city.equals(<span class="string">"london"</span>)|| city.equals(<span class="string">"paris"</span>)))</span><br><span class="line">&#123;</span><br><span class="line">    showAttractions(req,resp,city);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    showMainPage(req,resp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-隐藏域"><a href="#2-隐藏域" class="headerlink" title="2.隐藏域"></a>2.隐藏域</h2><p>类似于URL重写，但是不是将值附加到URL上，而是附加到表单中的隐藏域中，</p>
<blockquote>
<p>Demo</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.bdqn.entity.Customer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"CustomerServlet"</span> ,urlPatterns = &#123;<span class="string">"/customer"</span>,<span class="string">"/editCustomer"</span>,<span class="string">"/updateCustomer"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = -<span class="number">20L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Customer&gt; customers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span> <span class="keyword">throws</span> ServletException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Customer customer1 = <span class="keyword">new</span> Customer();</span><br><span class="line">        customer1.setId(<span class="number">1</span>);</span><br><span class="line">        customer1.setName(<span class="string">"Donald D."</span>);</span><br><span class="line">        customer1.setCity(<span class="string">"Miami"</span>);</span><br><span class="line"></span><br><span class="line">        customers.add(customer1);</span><br><span class="line"></span><br><span class="line">        Customer customer2 = <span class="keyword">new</span> Customer();</span><br><span class="line">        customer2.setId(<span class="number">2</span>);</span><br><span class="line">        customer2.setName(<span class="string">"Mickey M"</span>);</span><br><span class="line">        customer2.setCity(<span class="string">"Orlando"</span>);</span><br><span class="line">        customers.add(customer2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendCustomerList</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Customers&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;&lt;h2&gt;Customers&lt;h2&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;ul&gt;"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Customer customer : customers)</span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(<span class="string">"&lt;li&gt;"</span> + customer.getName() + <span class="string">"("</span> + customer.getCity() + <span class="string">") ("</span> + <span class="string">"&lt;a href='editCustomer?id="</span> + customer.getId() + <span class="string">"'&gt;edit&lt;/a&gt;)"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;/ul&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Customer <span class="title">getCustomer</span><span class="params">(<span class="keyword">int</span> customerId)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (Customer customer : customers)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (customer.getId() == customerId)</span><br><span class="line">                <span class="keyword">return</span> customer;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sendEditCustomerForm</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = response.getWriter();</span><br><span class="line">        <span class="keyword">int</span> customerId = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            customerId = Integer.parseInt(request.getParameter(<span class="string">"id"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (NumberFormatException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Customer customer = getCustomer(customerId);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(customer != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Edit Customer&lt;/title&gt;&lt;/head&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;body&gt;&lt;h2&gt;Edit Customer&lt;/h2&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;from method='post' action='updateCustomer'&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;input type='hidden' name='id' value='"</span> + customerId + <span class="string">"'/&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;table&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;Name:&lt;/td&gt;&lt;td&gt;&lt;input name='name' value='"</span> + customer.getName().replaceAll(<span class="string">"'"</span>,<span class="string">"&amp;#39;"</span>) + <span class="string">"'/&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;City:&lt;/td&gt;&lt;td&gt;&lt;input name='City' value='"</span> + customer.getCity().replaceAll(<span class="string">"'"</span>,<span class="string">"&amp;#39;"</span>) + <span class="string">"'/&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;tr&gt;&lt;td colspan='2' style='text-align:right'&gt;&lt;input type='submit' value='Update'/&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;&lt;a href='customer'&gt;Customer List&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;/table&gt;"</span>);</span><br><span class="line">            writer.println(<span class="string">"&lt;/form&gt;&lt;/body&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(<span class="string">"NO customer found"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> customerId = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            customerId = Integer.parseInt(req.getParameter(<span class="string">"id"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (NumberFormatException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        Customer customer = getCustomer(customerId);</span><br><span class="line">        <span class="keyword">if</span>(customer != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            customer.setName(req.getParameter(<span class="string">"name"</span>));</span><br><span class="line">            customer.setCity(req.getParameter(<span class="string">"city"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        sendCustomerList(resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        String uri = req.getRequestURI();</span><br><span class="line">        <span class="keyword">if</span>(uri.endsWith(<span class="string">"/customer"</span>))</span><br><span class="line">            sendCustomerList(resp);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            sendEditCustomerForm(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法积累</p>
</blockquote>
<table>
    <tr>
        <td>String getRequestURI()</td>
        <td>返回除去host（域名或者ip）部分的路径</td>
    </tr>
    <tr>
        <td>public boolean endsWith(String suffix)</td>
        <td>测试字符串是否以指定的后缀结束</td>
    </tr>
</table>
> Demo剖析
>

<p>Demo一共有三个URL映射，前两个会调用doGet方法，后一个会调用doPost方法，</p>
<p>/customer是该Demo的入口URL，他会列举出在init中初始化的列表customers。</p>
<p>每一个客户后面都会有一个edit链接，其中链接属性是/editCustomer?id=customerId当通过链接访问时会调用doGet方法从而间接的调用sendEditCustomerForm方法而生成一个表单，其中表单中的隐藏域中有客户的ID。</p>
<h2 id="3-Cookies"><a href="#3-Cookies" class="headerlink" title="3.Cookies"></a>3.Cookies</h2><p>URL重写和隐藏域是的传递数据十分方便，但是多页面交互会使得代码过于臃肿于是就有了Cookies</p>
<blockquote>
<p>什么是Cookies?</p>
</blockquote>
<p>cookie是Netscape公司发明，由<strong>服务端</strong>生成并发送给<strong>客户端</strong>，浏览器会保存至目录下的某个文本文件。</p>
<p>当用户在浏览网站时，web服务器会将一些资料存放在客户端，其中包括用户在浏览网站时输入的一些文本和选择记录，当用户<strong>下一次</strong>访问该网站时，服务端会先从客户端查看是否会有保留的cookie信息，然后依据cookie内容呈现特定的内容给客户</p>
<p>cookies是一个很少的信息片段，自动的在浏览器和Web服务器间交互，使得多个页面数据交互变得十分轻松。</p>
<p>用户可以更改浏览器设置来拒绝cookies</p>
<blockquote>
<p>如何正确食用</p>
</blockquote>
<p>使用Cookies需要熟悉javax.servlet.http.Cookie类以及HttpServletRequest和HttpServletResponse两个接口。</p>
<p>下面创建了一个cookie</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie cookie = <span class="keyword">new</span> Cookie(name,value);</span><br></pre></td></tr></table></figure>

<p>创建完成一个cookie对象后可以设置domain、path和maxAge属性，其中maxAge属性决定了cookie的寿命</p>
<p>将cookie发送到浏览器，需要HttpServletResponse的addCookie方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">httpServletResponse.addCookie(cookie);</span><br></pre></td></tr></table></figure>

<p>Cookie也可以通过客户端的js脚本删除和创建（不在此前学习范围内）</p>
<p>读取可以使用HttpServletResponse的getCookies方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询遍历整个cookie</span></span><br><span class="line">Cookie[] cookies = request.getCookies();</span><br><span class="line">Cookie maxRecordsCookie = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">if</span>(cookies != <span class="keyword">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">for</span>(Cookie cookie : cookies)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(cookie.getName().equals(<span class="string">"maxRecords"</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			maxRecordsCookie = cookie;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>控制Cookie的方法</p>
</blockquote>
<table>
    <tr>
        <td>方法名称</td>
        <td>说明</td>
    </tr>
    <tr>
        <td>void setMaxAge(int expiry)</td>
        <td>设置cookie的有效期，以秒为单位</td>
    </tr>
    <tr>
        <td>String getName()</td>
        <td>获得cookie的名称</td>
    </tr>
    <tr>
        <td>String getValue()</td>
        <td>获取cookie的值</td>
    </tr>
    <tr>
        <td>int getMaxAge(int expiry)</td>
        <td>获取cookie的有效期，以秒为单位</td>
    </tr>
</table>

<blockquote>
<p>Demo</p>
</blockquote>
<p>PreferenceServlet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"PreferenceSevlet"</span> ,urlPatterns = &#123;<span class="string">"/preference"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PreferenceSevlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">888L</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String MENU = <span class="string">"&lt;div style='background:#e8e8e8;padding:15px'&gt;"</span></span><br><span class="line">            +<span class="string">"&lt;a href='cookieClass'&gt;Cookie Class&lt;/a&gt;&amp;nbsp;&amp;nbsp;"</span></span><br><span class="line">            +<span class="string">"&lt;a href='cookieInfo'&gt;Cookie Info&lt;/a&gt;&amp;nbsp;&amp;nbsp;"</span></span><br><span class="line">            +<span class="string">"&lt;a href='preference'&gt;Preference&lt;/a&gt;&lt;/div&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Preference&lt;/title&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;style&gt;table&#123;font-size:small;background:NavajoWhite&#125;&lt;/style&gt;&lt;/head&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;body&gt;"</span> + MENU + <span class="string">"Please select the values below:"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;form method='post'&gt;&lt;table&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;Title Font Size:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;select name='titleFontSize'&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;option&gt;large&lt;/option&gt;&lt;option&gt;x-large&lt;/option&gt;&lt;option&gt;xx-large&lt;/option&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;Title Style &amp; Weight:&lt;td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;select name='titleStyleAndWeight' multiple&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;option&gt;italic&lt;/option&gt;&lt;option&gt;bold&lt;/option&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;&lt;td&gt;Max. Records in Table:&lt;/td&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;td&gt;&lt;select name='maxRecords'&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;option&gt;5&lt;/option&gt;&lt;option&gt;10&lt;/option&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;tr&gt;&lt;td rowspan='2'&gt;&lt;input type='submit' value='Set'/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        String maxRecords = req.getParameter(<span class="string">"maxRecords"</span>);</span><br><span class="line">        String[] titleStyleAndWeight = req.getParameterValues(<span class="string">"titleStyleAndWeight"</span>);</span><br><span class="line">        String titleFontSize = req.getParameter(<span class="string">"titleFontSize"</span>);</span><br><span class="line">        resp.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"maxRecords"</span>,maxRecords));</span><br><span class="line">        resp.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"titleFontSize"</span>,titleFontSize));</span><br><span class="line"></span><br><span class="line">        Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"titleFontWeight"</span>,<span class="string">""</span>);</span><br><span class="line">        cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        cookie = <span class="keyword">new</span> Cookie(<span class="string">"titleFontStyle"</span>,<span class="string">""</span>);</span><br><span class="line">        cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">        resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(titleStyleAndWeight != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (String style : titleStyleAndWeight)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(style.equals(<span class="string">"bold"</span>))</span><br><span class="line">                    resp.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"titleFontWeight"</span>,<span class="string">"bold"</span>));</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    resp.addCookie(<span class="keyword">new</span> Cookie(<span class="string">"titleFontStyle"</span>,<span class="string">"italic"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Preference&lt;/title&gt;"</span></span><br><span class="line">                + <span class="string">"&lt;/head&gt;&lt;body&gt;"</span> + MENU + <span class="string">"You preference has been set."</span></span><br><span class="line">                + <span class="string">"&lt;br/&gt;&lt;br/&gt;Max.Records in Table:"</span> + maxRecords</span><br><span class="line">                + <span class="string">"&lt;br/&gt;Title Font Size: "</span> + titleFontSize</span><br><span class="line">                + <span class="string">"&lt;br/&gt;Title Font Style &amp; Weight:"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(titleStyleAndWeight != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(<span class="string">"&lt;ul&gt;"</span>);</span><br><span class="line">            <span class="keyword">for</span>(String style : titleStyleAndWeight)</span><br><span class="line">            &#123;</span><br><span class="line">                writer.println(<span class="string">"&lt;li&gt;"</span> + style + <span class="string">"&lt;/li&gt;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            writer.println(<span class="string">"&lt;/ul&gt;"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CookieClassServlet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"CookieClassServlet"</span>,urlPatterns = &#123;<span class="string">"/cookieClass"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieClassServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">837369L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String[] methods = &#123;<span class="string">"clone"</span>,<span class="string">"getComment"</span>,<span class="string">"getDomain"</span>,<span class="string">"getMaxAge"</span>,<span class="string">"getName"</span>,<span class="string">"getPath"</span>,<span class="string">"getSecure"</span>,<span class="string">"getValue"</span>,<span class="string">"getVersion"</span>,<span class="string">"isHttpOnly"</span>,<span class="string">"setComment"</span>,<span class="string">"setDomain"</span></span><br><span class="line">        ,<span class="string">"setHttpOnly"</span>,<span class="string">"setMaxAge"</span>,<span class="string">"setPath"</span>,<span class="string">"setSecure"</span>,<span class="string">"setValue"</span>,<span class="string">"setVersion"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Cookie[] cookies= req.getCookies();</span><br><span class="line">        Cookie maxRecordsCookie = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(cookie.getName().equals(<span class="string">"maxRecords"</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    maxRecordsCookie = cookie;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//默认为5</span></span><br><span class="line">        <span class="keyword">int</span> maxRecords = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">if</span>(maxRecordsCookie != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                maxRecords = Integer.parseInt(maxRecordsCookie.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span> (NumberFormatException e)</span><br><span class="line">            &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Cookie Class&lt;/title&gt;&lt;/head&gt;"</span></span><br><span class="line">                    + <span class="string">"&lt;body&gt;"</span></span><br><span class="line">                    + PreferenceSevlet.MENU</span><br><span class="line">                    + <span class="string">"&lt;div&gt;Here are some of the methods in"</span></span><br><span class="line">                    + <span class="string">"javax.servlet.http.Cookie"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;ul&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; maxRecords;i++)</span><br><span class="line">            writer.println(<span class="string">"&lt;li&gt;"</span> + methods[i] + <span class="string">"&lt;/li&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/ul&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CookieInfoServlet类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.bdqn.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet</span>(name = <span class="string">"CookieInfoServlet"</span>,urlPatterns = &#123;<span class="string">"/cookieInfo"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CookieInfoServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">3829L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        Cookie[] cookies = req.getCookies();</span><br><span class="line">        StringBuilder styles = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        styles.append(<span class="string">".title&#123;"</span>);</span><br><span class="line">        <span class="keyword">if</span>(cookies != <span class="keyword">null</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies)</span><br><span class="line">            &#123;</span><br><span class="line">                String name = cookie.getName();</span><br><span class="line">                String value = cookie.getValue();</span><br><span class="line">                <span class="keyword">if</span>(name.equals(<span class="string">"titleFontSize"</span>))</span><br><span class="line">                    styles.append(<span class="string">"font-size:"</span> + value + <span class="string">";"</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(name.equals(<span class="string">"titleFontWeight"</span>))</span><br><span class="line">                    styles.append(<span class="string">"font-weight:"</span> + value + <span class="string">";"</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(name.equals(<span class="string">"titleFontStyle"</span>))</span><br><span class="line">                    styles.append(<span class="string">"font-style:"</span> + value + <span class="string">";"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        styles.append(<span class="string">"&#125;"</span>);</span><br><span class="line">        resp.setContentType(<span class="string">"text/html"</span>);</span><br><span class="line">        PrintWriter writer = resp.getWriter();</span><br><span class="line">        writer.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;Cookie Info&lt;/title&gt;"</span></span><br><span class="line">        + <span class="string">"&lt;style&gt;"</span> + styles.toString() + <span class="string">"&lt;/style&gt;"</span></span><br><span class="line">        + <span class="string">"&lt;/head&gt;&lt;body&gt;"</span> + PreferenceSevlet.MENU</span><br><span class="line">        + <span class="string">"&lt;div class='title'&gt;"</span></span><br><span class="line">        + <span class="string">"Session Management with Cookies:&lt;/div&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;div&gt;"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(cookies == <span class="keyword">null</span>)</span><br><span class="line">            writer.println(<span class="string">"No cookie in this HTTP response"</span>);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            writer.println(<span class="string">"&lt;br/&gt;Cookies in this HTTP response:"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies)</span><br><span class="line">                writer.println(<span class="string">"&lt;br/&gt;"</span> + cookie.getName() + <span class="string">":"</span> + cookie.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        writer.println(<span class="string">"&lt;/div&gt;"</span>);</span><br><span class="line">        writer.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PreferenceServlet剖析</p>
</blockquote>
<p>当用户提交表单时，web服务器会调用PreferenceServlet的doPost()方法，该方法会创建4个cookies，并且覆盖之前的cookie的值。然后返回给浏览器。</p>
<p><strong>1.doGet方法</strong></p>
<p>由于HttpServlet每次请求都会调用doGet方法，所以使用doGet加载网页。</p>
<p><strong>2.doPost方法</strong></p>
<p>当表单以Post方式提交，会调用doPost方法，同时添加cookie到本地。</p>
<h2 id="4-HttpSession对象"><a href="#4-HttpSession对象" class="headerlink" title="4.HttpSession对象"></a>4.HttpSession对象</h2><p>在会话跟踪技术中，HttpSession对象是最强大最通用的。一个用户最多只有一个HttpSession，并且不会被其他用户访问到。</p>
<blockquote>
<p>怎么创建（获取）Session对象</p>
</blockquote>
<p>HttpSession对象在用户第一次访问网站时就会被创建，可以通过HttpServletRequest的getSession方法获取对象</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/Servlet/%E7%AC%94%E8%AE%B0/" data-id="ckcyfaqvp0005ekv2204ef0hf" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/jsp/3.Cookie" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/jsp/3.Cookie/" class="article-date">
  <time datetime="2020-07-23T06:07:08.333Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/jsp/3.Cookie/">javaWeb/jsp/3.Cookie</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><p>session对象使用Cookie存储在<strong>客户端</strong>的</p>
<h2 id="1-什么是Cookie"><a href="#1-什么是Cookie" class="headerlink" title="1.什么是Cookie"></a>1.什么是Cookie</h2><p>cookie是Netscape公司发明，由<strong>服务端</strong>生成并发送给<strong>客户端</strong>，浏览器会保存至目录下的某个文本文件。</p>
<p>当用户在浏览网站时，web服务器会将一些资料存放在客户端，其中包括用户在浏览网站时输入的一些文本和选择记录，当用户<strong>下一次</strong>访问该网站时，服务端会先从客户端查看是否会有保留的cookie信息，然后依据cookie内容呈现特定的内容给客户</p>
<h2 id="2-怎么使用cookie"><a href="#2-怎么使用cookie" class="headerlink" title="2.怎么使用cookie"></a>2.怎么使用cookie</h2><ol>
<li><p>创建cookie对象    </p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie newCookie = <span class="keyword">new</span> Cookie(String name,String value)</span><br></pre></td></tr></table></figure>
</li>
<li><p>写入cookie</p>
<p>可以使用response对象的addCookie()方法。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.addCookie(newCookie);</span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td>方法名称</td>
        <td>说明</td>
    </tr>
    <tr>
        <td>void setMaxAge(int expiry)</td>
        <td>设置cookie的有效期，以秒为单位</td>
    </tr>
    <tr>
        <td>String getName()</td>
        <td>获得cookie的名称</td>
    </tr>
    <tr>
        <td>String getValue()</td>
        <td>获取cookie的值</td>
    </tr>
    <tr>
        <td>int getMaxAge(int expiry)</td>
        <td>获取cookie的有效期，以秒为单位</td>
    </tr>
</table>
</li>
<li><p>读取cookie</p>
<p>response对象的addCookie()方法写入cookie后，读取时需要调用JSP中的request对象的getCookies()方法返回HTTP请求中的cookie对象数组。</p>
<p>cookie是通过name/value方式进行保存的，所以在找值时应该对每一个cookie经行遍历检查。</p>
</li>
</ol>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		Cookie[] cookies = request.getCookies();</span><br><span class="line">		String user = <span class="string">""</span>;</span><br><span class="line">		String password = <span class="string">""</span>;</span><br><span class="line">		<span class="keyword">if</span>(cookies != <span class="keyword">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt; cookies.length;i++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(cookies[i].getName().equals(<span class="string">"test"</span>))</span><br><span class="line">				&#123;</span><br><span class="line">					user = cookies[i].getValue();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		out.print(user);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>当cookie不存储信息时，默认存储sessionid这一条数据。</p>
<h2 id="3-cookie有效期"><a href="#3-cookie有效期" class="headerlink" title="3.cookie有效期"></a>3.cookie有效期</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/jsp/3.Cookie/" data-id="ckcyfaqvr0006ekv2dkoz7tbk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/jsp/2.JSP内置对象" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/jsp/2.JSP%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1/" class="article-date">
  <time datetime="2020-07-23T06:07:08.313Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/jsp/2.JSP%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1/">javaWeb/jsp/2.JSP内置对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h1><h2 id="out对象"><a href="#out对象" class="headerlink" title="out对象"></a>out对象</h2><p>out对象其作用最主要的就是向网页中输出信息。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	out.print(<span class="string">"Hello world"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="request对象"><a href="#request对象" class="headerlink" title="request对象"></a>request对象</h2><p>request对象主要处理的就是浏览器的<strong>请求信息</strong></p>
<p>客户端—-发送请求—–&gt;request对象(jsp页面)&lt;———获取请求信息———服务器</p>
<table>
    <tr>
        <td>方法名称</td>
        <td>说明</td>
    </tr>
    <tr>
        <td>String getParamenter(String name)</td>
        <td>根据<strong>页面表单</strong>组件名称获取其提交的数据</td>
    </tr>
    <tr>
        <td>String[] getParamenterValues(String name)</td>
        <td>根据<strong>一组相同页面表单组件名称</strong>获取其提交的数据</td>
    </tr>
    <tr>
        <td>void getCharacterEncoding(String charset)</td>
        <td>指定每个请求的编码格式<strong>主要用于处理中文乱码</strong>，应该在以上方法之前设定</td>
    </tr>
    <tr>
    <td>RequestDispatcher getParamenterValues(String name)</td>
    <td>返回一个javax.servlet.RequestDispatcher对象,用于转发请求</td>
</tr>


<p>eg:一下为登录做一个案例</p>
<p>登录页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name = <span class="string">"form1"</span> method=<span class="string">"post"</span> action=<span class="string">"reginfo.jsp"</span>&gt;</span><br><span class="line">			&lt;table&gt;</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;td&gt;用户名&lt;/td&gt;</span><br><span class="line">					&lt;td&gt;&lt;input type="text" name="name"&gt;&lt;/td&gt;</span><br><span class="line">				&lt;/tr&gt;</span><br><span class="line">				</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;td height="19"&gt;密码&lt;/td&gt;</span><br><span class="line">					&lt;td height="19"&gt;&lt;input type = "password" name = "pwd"&gt;&lt;/td&gt;</span><br><span class="line">				&lt;/tr&gt;</span><br><span class="line">				</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;td&gt;信息来源&lt;/td&gt;</span><br><span class="line">					&lt;td&gt;</span><br><span class="line">						&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"channel"</span> value = <span class="string">"报刊"</span>&gt;报刊</span><br><span class="line">						&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"channel"</span> value = <span class="string">"网络"</span>&gt;网络&lt;br/&gt;</span><br><span class="line">						&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"channel"</span> value = <span class="string">"朋友推荐"</span>&gt;朋友推荐</span><br><span class="line">						&lt;input type=<span class="string">"checkbox"</span> name=<span class="string">"channel"</span> value = <span class="string">"电话"</span>&gt;电话</span><br><span class="line">					&lt;/td&gt;</span><br><span class="line">				&lt;/tr&gt;</span><br><span class="line">				</span><br><span class="line">				&lt;tr&gt;</span><br><span class="line">					&lt;td colspan=<span class="string">"2"</span> align=<span class="string">"center"</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">"submit"</span> name=<span class="string">"Submeit"</span> value=<span class="string">"提交"</span>&gt;</span><br><span class="line">						&lt;input type=<span class="string">"reset"</span> name=<span class="string">"Reset"</span> value=<span class="string">"取消"</span>&gt;</span><br><span class="line">					&lt;/td&gt;</span><br><span class="line">				&lt;/tr&gt;</span><br><span class="line">			&lt;/table&gt;</span><br><span class="line">		&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>数据处理页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% </span><br><span class="line">	request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">	String name = request.getParameter(<span class="string">"name"</span>);</span><br><span class="line">	String pwd = request.getParameter(<span class="string">"pwd"</span>);</span><br><span class="line">	String[] channels = request.getParameterValues(<span class="string">"channel"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="response对象"><a href="#response对象" class="headerlink" title="response对象"></a>response对象</h2><p>与request对象一样，他主要处理网页的响应</p>
<table>
    <tr>
        <td>void addCookie(Cookie cookie)</td>
        <td>向用户端添加cookie</td>
    </tr>
    <tr>
        <td>void setContentType(String type)</td>
        <td>设置HTTP响应contentType类型</td>
    </tr>
    <tr>
        <td>void setContentEncoding(String charset)</td>
        <td>设置响应所采用的字符编码级</td>
    </tr>
    <tr>
        <td>void sendRedirect(String location)</td>
        <td>将请求重新定向到一个新的URL(页面)上</td>
    </tr>
</table>

<p>eg:假如登录成功之后跳转道欢迎界面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form name = <span class="string">"form1"</span> method=<span class="string">"post"</span> action=<span class="string">"doLogin.jsp"</span>&gt;</span><br><span class="line">		用户名:&lt;input type = <span class="string">"text"</span> name = <span class="string">"userName"</span>&gt;</span><br><span class="line">		密码:&lt;input type = <span class="string">"password"</span> name = <span class="string">"pwd"</span>&gt;</span><br><span class="line">		&lt;input type=<span class="string">"submit"</span> value = <span class="string">"登录"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>处理颜面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">		</span><br><span class="line">		String name = request.getParameter(<span class="string">"userName"</span>).trim();</span><br><span class="line">		String pwd = request.getParameter(<span class="string">"pwd"</span>).trim();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">boolean</span> vaild = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="string">"admin"</span>.equals(name) &amp;&amp; <span class="string">"admin"</span>.equals(pwd))</span><br><span class="line">		&#123;</span><br><span class="line">			vaild = <span class="keyword">true</span>;</span><br><span class="line">			</span><br><span class="line">			session.setAttribute(<span class="string">"login"</span>, name);</span><br><span class="line">			session.setMaxInactiveInterval(<span class="number">10</span>*<span class="number">60</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(vaild)</span><br><span class="line">		&#123;</span><br><span class="line">			request.getRequestDispatcher(<span class="string">"welcome.jsp"</span>).forward(request,response);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	%&gt;</span><br></pre></td></tr></table></figure>

<p>欢迎界面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%String name = request.getParameter(<span class="string">"userName"</span>); %&gt;</span><br><span class="line">	welcome&amp;nbsp;&lt;%=name %&gt;进入页面</span><br></pre></td></tr></table></figure>

<h3 id="查询字符串"><a href="#查询字符串" class="headerlink" title="查询字符串"></a>查询字符串</h3><p>主要适用于比较简单的数据传递。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数据提交网页.jsp?变量名=值</span></span><br><span class="line">response.sendRedirect(<span class="string">"welcome.jsp?userName="</span> + name);</span><br></pre></td></tr></table></figure>

<p>Demo如下</p>
<p>会将选中的颜色提交给网页</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">请从一下<span class="number">7</span>种颜色中，选择你最喜欢的颜色&lt;br/&gt;</span><br><span class="line">	&lt;a href="color.jsp?color=red"&gt;赤色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=orgin"&gt;橙色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=yello"&gt;黄色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=grenn"&gt;绿色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=skybule"&gt;青色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=bule"&gt;蓝色&lt;/a&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">	&lt;a href="color.jsp?color=zise"&gt;紫色&lt;/a&gt;</span><br></pre></td></tr></table></figure>

<p>注意：未在tomcat中设置字符集返回值为中文会引起报错</p>
<p>接受页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;%String color = request.getParameter(<span class="string">"color"</span>); %&gt;</span><br><span class="line">	你最喜欢的颜色是:&lt;%=color %&gt;</span><br></pre></td></tr></table></figure>

<h2 id="session对象"><a href="#session对象" class="headerlink" title="session对象"></a>session对象</h2><p>HTTP协议是基于请求/响应模式的无状态的访问协议，“无状态”就是指<strong>每一个HTTP请求都是独立的</strong>，服务器不会保存以往的请求和会话记录。</p>
<p>当用户发生请求时，无论是不是第一次访问，都会当作第一个来对待，所以就必须有一种机制来标识一个用户的唯一标识，同时记录该用户的状态，这就是<strong>会话跟踪机制</strong></p>
<h3 id="什么是会话"><a href="#什么是会话" class="headerlink" title="什么是会话?"></a>什么是会话?</h3><p>一个会话就是指在一段时间中，一个用户与web服务器的一连串相关的交互过程（其中包含请&amp;响应过程）。</p>
<p>当用户向服务器发起一次请求时，服务器就会为该用户创建<strong>一个唯一会话</strong>，直到用户访问结束，如果一个用户发起请求，服务器就会判断是否已经创建与该用户的为已请求</p>
<p>​        服务器会根据sessionid这个唯一标识来判断是否和该用户创建会话，如果请求中包含一个sessionid，说明已经建立了一个会话，服务器会根据这个sessionid将相应的会话对象读取出来</p>
<p>如果没有，就创建一个新的会话。</p>
<p>sessionid是采用cookie来实现的</p>
<table>
    <tr>
        <td>方法名称</td>
        <td>说明</td>
    </tr>
    <tr>
        <td>String getId</td>
        <td>获取sessionid</td>
    </tr>
    <tr>
        <td>void setMaxInactiveInterval(int interval)</td>
        <td>设定session的非活动时间</td>
    </tr>
    <tr>
        <td>int getMaxInactiveInterval()</td>
        <td>获取session的有效非活动时间，以秒为单位</td>
    </tr>
    <tr>
        <td>void invalidate</td>
        <td>设置session对象失效</td>
    </tr>
    <tr>
        <td>void setAttribute(String key,Object value)</td>
        <td>以key/value(键值对)的形式将对象保存道session中</td>
    </tr>
    <tr>
        <td>Object getAtttribute(String key)</td>
        <td>通过key(键)获取session保存的对象</td>
    </tr>
    <tr>
        <td>void removeAttribute(String key)</td>
        <td>从session中删除指定的key(键)对象</td>
    </tr>
</table>

<p><strong>如何使用session对象实现权限的控制</strong></p>
<ol>
<li>用户在登录页面输入用户名和密码。</li>
<li>在登陆处理页面进行验证。</li>
<li>在会话中，检查是否登录成功，保存用户信息，跳转到管理员页面。</li>
<li>在管理员页面经行校验</li>
<li>失败返回登录页面</li>
</ol>
<p>登录处理页面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">		</span><br><span class="line">		String name = request.getParameter(<span class="string">"userName"</span>).trim();</span><br><span class="line">		String pwd = request.getParameter(<span class="string">"pwd"</span>).trim();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">boolean</span> vaild = <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(<span class="string">"admin"</span>.equals(name) &amp;&amp; <span class="string">"admin"</span>.equals(pwd))</span><br><span class="line">		&#123;</span><br><span class="line">			vaild = <span class="keyword">true</span>;</span><br><span class="line">			</span><br><span class="line">			session.setAttribute(<span class="string">"login"</span>, name);</span><br><span class="line">			session.setMaxInactiveInterval(<span class="number">10</span>*<span class="number">60</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(vaild)</span><br><span class="line">		&#123;</span><br><span class="line">			request.getRequestDispatcher(<span class="string">"welcome.jsp"</span>).forward(request,response);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	%&gt;</span><br></pre></td></tr></table></figure>

<p>管理员操作界面</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		String login = (String)session.getAttribute(<span class="string">"login"</span>);</span><br><span class="line">		<span class="keyword">if</span>(login==<span class="keyword">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	%&gt;</span><br><span class="line">	您好，欢迎您!</span><br></pre></td></tr></table></figure>

<h3 id="会话失效"><a href="#会话失效" class="headerlink" title="会话失效"></a><strong>会话失效</strong></h3><p>会话有时效，使会话失效的方式有两种，一种是<strong>会话超时</strong>，另一种是<strong>手动调用方法设置失效</strong></p>
<p>会话超时是指两次请求的时间间隔远远的超过了服务器允许的最大时间间隔，时间间隔可以通过三种方法设置。</p>
<p>（1）通过session对象的setMaxInactivelnterval()设置</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	session.setAttribute(<span class="string">"login"</span>,<span class="string">"admin"</span>);</span><br><span class="line">	<span class="comment">//参数的单位是秒，即十分钟之后对象失效</span></span><br><span class="line">	session.setMaxInactivelnterval(<span class="number">600</span>);</span><br><span class="line">	……</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>(2)在项目的web.xml中设置代码。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>10<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>单位是分钟。设置为0或者为负数表示永不超时。</p>
<p>(3)在服务器中设置，在Tomcat目录/conf/web.xml中找到<session-config>元素。修改方式如上</p>
<p>手动方法失效是通过session对象的invalidate()方法实现，主要用于用户注销的场合。如果只想清空对话中的某个数据对象，可以调用session.removeAttribute(String key)方法。</p>
<h2 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h2><p>当然，有些地方有需要用到二级验证，那就可以使用include指令</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">"应用文件目录"</span>%&gt;</span><br></pre></td></tr></table></figure>

<p>二级验证写入一个独立的jsp文件中</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		String login = (String)session.getAttribute(<span class="string">"login"</span>);</span><br><span class="line">		<span class="keyword">if</span>(login==<span class="keyword">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			response.sendRedirect(<span class="string">"index.jsp"</span>);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>然后引用就行。</p>
<h2 id="application"><a href="#application" class="headerlink" title="application"></a>application</h2><p>application相当于系统的<strong>全局变量</strong>，用于<strong>同一个</strong>应用内的所有用户之间的数据<strong>共享</strong></p>
<table>
    <tr>
        <td>方法名称</td>
        <td>说明</td>
    </tr>
    <tr>
        <td>void setAttribute(String key,Object value)</td>
        <td>以key/value(键值对)的形式将数据存储到application中</td>
    </tr>
    <tr>
        <tr>Object getAttribute(String key)</tr>
        <tr>通过key获取application中存储的对象</tr>
    </tr>
    <tr>
        <td>String getRealPath(String path)</td>
        <td>返回相对路径的真实路径</td>
    </tr>
</table>

<p>记录当前网站的访问人数</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">		Integer count = (Integer)application.getAttribute(<span class="string">"count"</span>);</span><br><span class="line">		<span class="keyword">if</span>(count != <span class="keyword">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			count = count + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			count = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		application.setAttribute(<span class="string">"count"</span>, count);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="扩展点：pageContext"><a href="#扩展点：pageContext" class="headerlink" title="扩展点：pageContext"></a>扩展点：pageContext</h2><p>pageContext提供了JSP在运行时和其相关的环境信息的能力，可以通过pageContext对象访问和当前页面有关的作用域和属性</p>
<table>
    <tr>
        <td>ServletRequest getRequest()</td>
        <td>获得request对象</td>
    </tr>
    <tr>
        <td>ServletResponse getResponse()</td>
        <td>获得response对象</td>
    </tr>
    <tr>
        <td>HttpSession getSession()</td>
        <td>获得session</td>
    </tr>
    <tr>
        <td>JspWriter getOut()</td>
        <td>获得out对象</td>
    </tr>
    <tr>
        <td>void setAttribute()</td>
        <td>保存属性</td>
    </tr>
    <tr>
        <td>Object getAttribute()</td>
        <td>获得属性</td>
    </tr>
    <tr>
        <td>void include()</td>
        <td>请求指定的资源，并将目标的响应结果包含在调用页面的响应中</td>
    </tr>
    <tr>
        <td>page</td>
        <td>表示当前页面，类似于this</td>
    </tr>
    <tr>
        <td>config</td>
        <td>用于存放JSP编译后的初始数据</td>
    </tr>
    <tr>
        <td>exception</td>
        <td>表示JSP页面运行时产生的异常和错误信息，该对象只能在错误页面(page指令中设定isErrorPage为ture)才能使用</td>
    </tr>
</table>

<p>Page作用域指单一JSP页面范围，page作用域的对象只能在创建该对象的页面中访问。</p>
<p>Demo</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	String name = <span class="string">"request"</span>;</span><br><span class="line">	request.setAttribute(<span class="string">"name"</span>, name);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;strong&gt;</span><br><span class="line">	testOne:&lt;%=pageContext.getAttribute(<span class="string">"name"</span>) %&gt;</span><br><span class="line">&lt;/strong&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">	pageContext.include(<span class="string">"testTwo.jsp"</span>);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;strong&gt;testTwo:&lt;%=pageContext.getAttribute("name") %&gt;&lt;/strong&gt;</span><br></pre></td></tr></table></figure>

<h2 id="request作用域"><a href="#request作用域" class="headerlink" title="request作用域"></a>request作用域</h2><p>pageContext的作用域和当前页面绑在一起，而request的作用域则是与客户端的请求绑在一起</p>
<p> request作用域在页面转发或者包含的页面中，都可以共享同一个request作用域，访问其中的数据</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line">	String name = <span class="string">"request"</span>;</span><br><span class="line">	request.setAttribute(<span class="string">"name"</span>, name);</span><br><span class="line">	request.getRequestDispatcher(<span class="string">"testTwo.jsp"</span>).forward(request,response);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;strong&gt;testTwo:&lt;%=request.getAttribute("name") %&gt;&lt;/strong&gt;</span><br></pre></td></tr></table></figure>

<h2 id="session作用域"><a href="#session作用域" class="headerlink" title="session作用域"></a>session作用域</h2><p>在会话有效期中，任何页面都可以访问其中的数据</p>
<p>不做演示</p>
<h2 id="application作用域"><a href="#application作用域" class="headerlink" title="application作用域"></a>application作用域</h2><p>任何页面都可以访问其中存储的信息</p>
<p>不做演示</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/jsp/2.JSP%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1/" data-id="ckcyfaqvn0004ekv2gxtm4cgt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/ServletContext" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/ServletContext/" class="article-date">
  <time datetime="2020-07-23T06:07:08.282Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/ServletContext/">javaWeb/ServletContext</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/ServletContext/" data-id="ckcyfaqto0000ekv21q0e868x" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-javaWeb/JSTL" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/07/23/javaWeb/JSTL/" class="article-date">
  <time datetime="2020-07-23T06:07:08.145Z" itemprop="datePublished">2020-07-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/07/23/javaWeb/JSTL/">javaWeb/JSTL</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JSTL"><a href="#JSTL" class="headerlink" title="JSTL"></a>JSTL</h1><p>去他妈的JSTL</p>
<blockquote>
<p>JSTL库</p>
</blockquote>
<table>
    <tr>
        <td>区域</td>
        <td>子函数</td>
        <td>URL</td>
        <td>前缀</td>
    </tr>
    <tr>
        <td>核心</td>
        <td>变量支持、流控制、URL管理、其它</td>
        <td>http://java.sun.com/jsp/jstl/core</td>
        <td>c</td>
    </tr>
    <tr>
        <td>XML</td>
        <td>核心、流控制、转换</td>
        <td>http://java.sun.com/jsp/jstl/xml</td>
        <td>x</td>
    </tr>
    <tr>
        <td>国际化</td>
        <td>语言区域、消息格式化、数字和日期格式化</td>
        <td>http://java.sun.com/jsp/jstl/fmt</td>
        <td>fmt</td>
    </tr>
    <tr>
        <td>数据库</td>
        <td>SQL</td>
        <td>http://java.sun.com/jsp/jstl/sql</td>
        <td>sql</td>
    </tr>
    <tr>
        <td>函数</td>
        <td>集合长度、字符串操作</td>
        <td>http://java.sun.com/jsp/jstl/functions</td>
        <td>fn</td>
    </tr>
</table>

<p><strong>注意：</strong>如果需要使用JSTL库需要在jsp页面添加一下taglib指令:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri="uri" prefix="prefix"%&gt;</span><br></pre></td></tr></table></figure>

<h2 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h2><p>操作变量的三个标签</p>
<blockquote>
<p>out标签</p>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:out value=<span class="string">"value"</span> [escapeXml=<span class="string">"&#123;true|false&#125;"</span>] [<span class="keyword">default</span>=<span class="string">"defaultValue"</span>]/&gt;</span><br></pre></td></tr></table></figure>

<table>
    <tr>
        <td>属性</td>
        <td>类型</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>value*+</td>
        <td>对象</td>
        <td>变量或者是需要输出的表达式，可以是EL表达式</td>
    </tr>
    <tr>
        <td>escapeXml+</td>
        <td>布尔</td>
        <td>将输出的结果中的<、>、&、'和"转化为相应的实体编码&^lt;、&^gt;、&^#034;和&^amp;(去掉^)</td>
    </tr>
    <tr>
        <td>default+</td>
        <td>对象</td>
        <td>默认值，当value为空是则会输出默认值</td>
    </tr>
</table>

<blockquote>
<p>set标签</p>
</blockquote>
<p>set标签可以在指定的范围内创建一个变量或者为JavaBean的属性赋值。</p>
<p>一下创建了一个引用字符串或者是现存的变量。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"city"</span> value=<span class="string">"Beijin"</span>&gt;</span><br></pre></td></tr></table></figure>

<p>以上创建了一个可以在整个jsp页面访问的变量（原书称为有界变量）city</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"job"</span> value=<span class="string">"$&#123;requestScope.position&#125;"</span> scope=<span class="string">"page"</span>&gt;</span><br></pre></td></tr></table></figure>

<p>以上创建了一个引用request的position对象，范围被指定为page。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set <span class="keyword">var</span>=<span class="string">"city"</span>&gt;</span><br><span class="line">        Beijin</span><br><span class="line">&lt;/c:set&gt;</span><br><span class="line">&lt;c:out value=<span class="string">"$&#123;city&#125;"</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>也可以赋值对象包含在HTML的内容中（原书成为body content）</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:set target=<span class="string">"$&#123;address&#125;"</span> property=<span class="string">"city"</span> value=<span class="string">"Tokyo"</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>在target属性中必须由一个EL表达式来引用这个对象，支持body content赋值。</p>
<table>
    <tr>
        <td>属性</td>
        <td>类型</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>value+</td>
        <td>对象</td>
        <td>要创建的字符串，或者是需要引用的对象，或者是新的属性值</td>
    </tr>
    <tr>
        <td>var</td>
        <td>字符串</td>
        <td>变量名</td>
    </tr>
    <tr>
        <td>target+</td>
        <td>对象</td>
        <td>其<strong>属性要被赋新值的对象</strong>；必须是一个javaBean对象或则Map对象</td>
    </tr>
    <tr>
        <td>property</td>
        <td>字符串</td>
        <td>被赋新值的属性名称</td>
    </tr>
</table>

<blockquote>
<p>remove标签</p>
</blockquote>
<p>用于删除对象。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:remove <span class="keyword">var</span>=<span class="string">"varName"</span> [scope=<span class="string">"&#123;page|session|application&#125;"</span>]&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意：被引用的对象是无法删除的。</strong></p>
<table>
    <tr>
        <td>属性</td>
        <td>类型</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>var</td>
        <td>字符串</td>
        <td>被删除的变量名</td>
    </tr>
    <tr>
        <td>scope</td>
        <td>字符串</td>
        <td>删除的范围</td>
    </tr>
</table>

<h2 id="条件行为"><a href="#条件行为" class="headerlink" title="条件行为"></a>条件行为</h2><blockquote>
<p>if标签</p>
</blockquote>
<p>原理同if-else同理，表达式为假则不执行，反则执行。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">"testCondition"</span> <span class="keyword">var</span>=<span class="string">"varName"</span> [scope=<span class="string">"&#123;page|request|session|application&#125;"</span>]</span><br></pre></td></tr></table></figure>

<p>其中可以包含body content。</p>
<table>
    <tr>
        <td>属性</td>
        <td>类型</td>
        <td>描述</td>
    </tr>
    <tr>
        <td>test+</td>
        <td>布尔</td>
        <td>决定测试的条件</td>
    </tr>
    <tr>
        <td>var</td>
        <td>字符串</td>
        <td>引用测试条件的变量值，类型为布尔</td>
    </tr>
    <tr>
        <td>scope</td>
        <td>字符串</td>
        <td>var定义的变量范围</td>
    </tr>
</table>

<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:<span class="keyword">if</span> <span class="keyword">var</span>=<span class="string">"login"</span> test=<span class="string">"$&#123;…………&#125;"</span>/&gt;</span><br><span class="line">$&#123;login?<span class="string">"login......."</span>:<span class="string">"login....."</span>&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>choose、when和otherwise标签</p>
</blockquote>
<p>以上标签类似于switch、case和default关键一样。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:choose&gt;</span><br><span class="line">	&lt;c:when test=<span class="string">"$&#123;param.status==full&#125;"</span>&gt;</span><br><span class="line">		you are a full member</span><br><span class="line">	&lt;/c:when&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;c:when test=<span class="string">"$&#123;param.status=='student'&#125;"</span>&gt;</span><br><span class="line">		you are a student member</span><br><span class="line">	&lt;/c:when&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;c:otherwise&gt;</span><br><span class="line">		Please register</span><br><span class="line">	&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>

<h2 id="遍历行为"><a href="#遍历行为" class="headerlink" title="遍历行为"></a>遍历行为</h2><blockquote>
<p>forEach标签</p>
</blockquote>
<p>它会无数次的反复遍历body content或者集合对象。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://sixrabbitbychina.github.io.git/2020/07/23/javaWeb/JSTL/" data-id="ckcyfaquz0001ekv29r2q6cba" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/23/linux/%E7%AC%94%E8%AE%B0/">linux/笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/23/javaWeb/%E6%B3%A8%E8%A7%A3/@WebServlet/">javaWeb/注解/@WebServlet</a>
          </li>
        
          <li>
            <a href="/2020/07/23/javaWeb/Servlet/%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E8%A8%80/">javaWeb/Servlet/表达式语言</a>
          </li>
        
          <li>
            <a href="/2020/07/23/javaWeb/Servlet/%E7%AC%94%E8%AE%B0/">javaWeb/Servlet/笔记</a>
          </li>
        
          <li>
            <a href="/2020/07/23/javaWeb/jsp/3.Cookie/">javaWeb/jsp/3.Cookie</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>